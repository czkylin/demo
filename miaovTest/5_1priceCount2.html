<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>无标题文档</title>
<script>
window.onload = function () {
	var oUl = document.getElementById('list');
	var aLi = oUl.getElementsByTagName('li');

    var oP = document.getElementById('p');
    var aStrong = oP.getElementsByTagName('strong');
		var all = aStrong[0];
		var total = aStrong[1];
		var max = aStrong[2];

    var strongs = oUl.getElementsByTagName("strong");
    var ems = oUl.getElementsByTagName("em");
    var spans = oUl.getElementsByTagName("span");

	for ( var i=0; i<aLi.length; i++ ) {
		fnCount ( aLi[i]);
	}
	function count() {
	  var a = 0;
	  var t= 0;
	  var m = 0;
	  for (var i = 0; i < spans.length; i++) {
	      a += Number(strongs[i].innerHTML);
	      t += parseFloat(spans[i].innerHTML);
	      if(strongs[i].innerHTML != 0){
	          if(parseFloat(ems[i].innerHTML) > m){
	              m = parseFloat(ems[i].innerHTML);
	          }
	      }
	  }
	  max.innerHTML = m;
	  all.innerHTML = a;
	  total.innerHTML = t;
  }


  function fnCount ( li) {
		var aBtn = li.getElementsByTagName ('input');
		var oStrong = li.getElementsByTagName ('strong')[0];
		var oEm = li.getElementsByTagName ('em')[0];
		var oSpan = li.getElementsByTagName ('span')[0];
		var n = Number(oStrong.innerHTML);			// '0'
		var price = parseFloat(oEm.innerHTML);			// 12.5



		aBtn[0].onclick = function () {
			if ( n > 0 ) {
				n--;
			}
			oStrong.innerHTML = n;
			oSpan.innerHTML = n*price + '元';
      count();

		}
		aBtn[1].onclick = function () {
			n++;
			oStrong.innerHTML = n;
			oSpan.innerHTML = n*price + '元';
      count();

		}

	}
}
</script>
</head>

<body>

<ul id="list">
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>12.5元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>10.5元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>8.5元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>8元</em>
    小计：<span>0元</span>
  </li>
	<li>
  	<input type="button" value="-" />
    <strong>0</strong>
  	<input type="button" value="+" />
    单价：<em>14.5元</em>
    小计：<span>0元</span>
  </li>
</ul>

<p id="p">
商品合计共：<strong >0</strong>件，共花费了：<strong >0</strong>元<br />
其中最贵的商品单价是：<strong >0</strong>元
</p>

</body>
</html>
